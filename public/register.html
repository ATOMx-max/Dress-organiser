<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Register | Dress Organizer</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />

  <style>
    *{margin:0;padding:0;box-sizing:border-box;}

    :root{
      --bg1:#1e1b4b;
      --bg2:#312e81;
      --bg3:#4c1d95;
      --accent1:#818cf8;
      --accent2:#c084fc;
      --muted:#c7d2fe;
    }

    body{
      font-family:"Inter",sans-serif;
      background:linear-gradient(135deg,var(--bg1),var(--bg2),var(--bg3));
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      color:white;
      position:relative;
      overflow:hidden;
    }

    /* Animated Gradient Background */
    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, #1e1b4b 0%, #312e81 50%, #4c1d95 100%);
      animation: gradientShift 15s ease infinite;
      z-index: 0;
    }

    @keyframes gradientShift {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }

    /* Floating Particles */
    .particles {
      position: absolute;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 1;
    }

    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: rgba(255, 255, 255, 0.6);
      border-radius: 50%;
      animation: particleFloat 25s infinite;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    }

    @keyframes particleFloat {
      0% {
        transform: translateY(100vh) translateX(0) scale(0);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) translateX(100px) scale(1);
        opacity: 0;
      }
    }

    /* Enhanced Floating Orbs */
    .orb{
      position:absolute;
      border-radius:50%;
      filter:blur(100px);
      opacity:0.2;
      animation:floatOrb 25s infinite ease-in-out;
      z-index:1;
    }
    .orb-1{
      width:600px;
      height:600px;
      top:-200px;
      left:-180px;
      background:linear-gradient(135deg,#818cf8,#c084fc);
      animation-delay: 0s;
    }
    .orb-2{
      width:500px;
      height:500px;
      bottom:-180px;
      right:-160px;
      background:linear-gradient(135deg,#f472b6,#fb923c);
      animation-delay:5s;
    }
    .orb-3{
      width:450px;
      height:450px;
      top:45%;
      left:50%;
      transform:translate(-50%, -50%);
      background:linear-gradient(135deg,#06b6d4,#3b82f6);
      animation-delay:10s;
    }

    @keyframes floatOrb{
      0%,100%{transform:translate(0,0) scale(1) rotate(0deg);}
      25%{transform:translate(60px,-60px) scale(1.15) rotate(90deg);}
      50%{transform:translate(-40px,40px) scale(0.9) rotate(180deg);}
      75%{transform:translate(50px,50px) scale(1.05) rotate(270deg);}
    }

    /* Main Card with Enhanced Effects */
    .card{
      width:100%;
      max-width:480px;
      padding:40px;
      border-radius:28px;
      backdrop-filter:blur(30px) saturate(180%);
      background:rgba(255,255,255,0.08);
      border:1px solid rgba(255,255,255,0.18);
      box-shadow:0 25px 70px rgba(0,0,0,0.5), 0 8px 16px rgba(0,0,0,0.3);
      z-index:10;
      text-align:center;
      animation:cardEntrance 0.8s cubic-bezier(0.16,1,0.3,1);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.05), transparent);
      animation: shimmer 3s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
      100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }

    @keyframes cardEntrance{
      0%{opacity:0;transform:translateY(50px) scale(.92); filter: blur(10px);}
      100%{opacity:1;transform:translateY(0) scale(1); filter: blur(0);}
    }

    /* Enhanced Logo */
    .logo{
      width:90px;
      height:90px;
      display:flex;
      justify-content:center;
      align-items:center;
      font-size:42px;
      background:linear-gradient(135deg,#818cf8,#c084fc);
      margin:0 auto 20px;
      border-radius:22px;
      box-shadow:0 15px 40px rgba(129,140,248,0.35), 0 0 0 8px rgba(129,140,248,0.1);
      animation:logoFloat 4s infinite ease-in-out;
      position: relative;
      z-index: 2;
      transition: transform 0.3s ease;
    }

    .logo:hover {
      transform: translateY(-5px) scale(1.05);
    }

    @keyframes logoFloat{
      0%,100%{transform:translateY(0) rotate(0deg);}
      25%{transform:translateY(-12px) rotate(-3deg);}
      75%{transform:translateY(-8px) rotate(3deg);}
    }

    h2 {
      position: relative;
      z-index: 2;
      font-size: 28px;
      font-weight: 800;
      margin-bottom: 8px;
      background: linear-gradient(135deg, #fff, #c7d2fe);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: titleGlow 2s ease-in-out infinite;
    }

    @keyframes titleGlow {
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.2); }
    }

    /* Enhanced Inputs */
    .input-group{
      margin-bottom:20px;
      position: relative;
      z-index: 2;
    }

    input{
      width:100%;
      padding:16px 18px;
      background:rgba(0,0,0,0.4);
      border:2px solid rgba(255,255,255,0.15);
      border-radius:14px;
      color:white;
      font-size:15px;
      outline:none;
      transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }

    input::placeholder {
      color: rgba(255, 255, 255, 0.5);
      transition: all 0.3s ease;
    }

    input:focus::placeholder {
      transform: translateX(10px);
      opacity: 0;
    }

    input:focus{
      border-color:var(--accent2);
      background:rgba(0,0,0,0.5);
      box-shadow:0 0 0 8px rgba(192,132,252,0.15), 0 8px 24px rgba(192,132,252,0.2);
      transform:translateY(-3px) scale(1.01);
    }

    .input-group.error input {
      animation: shake 0.5s ease;
      border-color: #f87171;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }

    .toggle{
      position:absolute;
      right:14px;
      top:50%;
      transform:translateY(-50%);
      cursor:pointer;
      font-size:20px;
      color:rgba(255,255,255,0.7);
      transition: all 0.3s ease;
      z-index: 3;
    }

    .toggle:hover {
      transform: translateY(-50%) scale(1.2);
      color: rgba(255,255,255,1);
    }

    .toggle:active {
      transform: translateY(-50%) scale(0.9);
    }

    /* Enhanced Submit Button */
    button{
      width:100%;
      padding:16px;
      border:none;
      border-radius:14px;
      margin-top:12px;
      font-size:16px;
      font-weight:700;
      background:linear-gradient(135deg,var(--accent1),var(--accent2));
      color:white;
      cursor:pointer;
      transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow:0 12px 32px rgba(129,140,248,0.4);
      position: relative;
      overflow: hidden;
      z-index: 2;
    }

    button::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.6s ease, height 0.6s ease;
    }

    button:hover::before {
      width: 300px;
      height: 300px;
    }

    button:hover{
      transform:translateY(-4px) scale(1.02);
      box-shadow:0 16px 40px rgba(129,140,248,0.5);
    }

    button:active {
      transform: translateY(-1px) scale(0.98);
    }

    button:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none;
    }

    .btn-text, .spinner {
      position: relative;
      z-index: 1;
    }

    .spinner{
      width:20px;
      height:20px;
      border:3px solid rgba(255,255,255,0.3);
      border-top-color:white;
      border-radius:50%;
      display:none;
      animation:spin 0.8s linear infinite;
      margin: 0 auto;
    }
    @keyframes spin{to{transform:rotate(360deg);}}

    /* Enhanced Message Box */
    .msg{
      margin-top:18px;
      padding:14px 16px;
      border-radius:12px;
      font-weight:600;
      display:none;
      animation: messageSlide 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      z-index: 2;
    }

    @keyframes messageSlide {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .msg.show{display:block;}
    .msg.error{
      background:linear-gradient(135deg, #fee2e2, #fecaca);
      color:#991b1b;
      border: 2px solid #f87171;
    }
    .msg.info{
      background:linear-gradient(135deg, #e0e7ff, #c7d2fe);
      color:#1e3a8a;
      border: 2px solid #818cf8;
    }
    .msg.success{
      background:linear-gradient(135deg, #dcfce7, #bbf7d0);
      color:#166534;
      border: 2px solid #4ade80;
      animation: messageSlide 0.4s cubic-bezier(0.4, 0, 0.2, 1), successPulse 2s ease;
    }

    @keyframes successPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }

    .links {
      position: relative;
      z-index: 2;
    }

    .links a{
      color:var(--muted);
      text-decoration:none;
      font-weight:600;
      display:inline-block;
      margin-top:16px;
      position: relative;
      transition: all 0.3s ease;
    }

    .links a::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--accent1), var(--accent2));
      transition: width 0.3s ease;
    }

    .links a:hover {
      color:white;
      transform: translateX(5px);
    }

    .links a:hover::after {
      width: 100%;
    }

    /* Responsive adjustments */
    @media (max-width: 480px) {
      .card { padding: 30px 25px; }
      h2 { font-size: 24px; }
      .logo { width: 75px; height: 75px; font-size: 36px; }
    }
  </style>
</head>

<body>

  <!-- Animated Particles -->
  <div class="particles" id="particles"></div>

  <!-- Background Orbs -->
  <div class="orb orb-1"></div>
  <div class="orb orb-2"></div>
  <div class="orb orb-3"></div>

  <div class="card">
    <div class="logo">üëó</div>

    <h2>Create Account</h2>
    <p style="color:var(--muted);margin-bottom:24px;position:relative;z-index:2;">Start organizing your wardrobe</p>

    <form id="registerForm" novalidate>

      <div class="input-group">
        <input id="name" type="text" placeholder="Full Name" autocomplete="name" />
      </div>

      <div class="input-group">
        <input id="username" type="text" placeholder="Username (optional)" autocomplete="username" />
      </div>

      <div class="input-group">
        <input id="email" type="email" placeholder="Email Address" required />
      </div>

      <div class="input-group" style="position:relative;">
        <input id="password" type="password" placeholder="Password" required />
        <span class="toggle" data-target="password">üëÅÔ∏è</span>
      </div>

      <div class="input-group" style="position:relative;">
        <input id="confirmPassword" type="password" placeholder="Confirm Password" required />
        <span class="toggle" data-target="confirmPassword">üëÅÔ∏è</span>
      </div>

      <button type="submit" id="registerBtn">
        <span class="btn-text">Create Account</span>
        <span class="spinner"></span>
      </button>
    </form>

    <p id="msg" class="msg"></p>

    <div class="links">
      <a href="login.html">Already have an account? Login ‚Üí</a>
    </div>
  </div>

<script>
// Create floating particles
function createParticles() {
  const particlesContainer = document.getElementById('particles');
  const particleCount = 30;
  
  for (let i = 0; i < particleCount; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    particle.style.left = Math.random() * 100 + '%';
    particle.style.animationDelay = Math.random() * 25 + 's';
    particle.style.animationDuration = (20 + Math.random() * 10) + 's';
    particlesContainer.appendChild(particle);
  }
}

createParticles();

const API_URL = window.location.origin.includes("localhost")
  ? "http://localhost:8080"
  : "https://dress-organiser.onrender.com";

document.querySelectorAll(".toggle").forEach(icon => {
  icon.addEventListener("click", () => {
    const input = document.getElementById(icon.dataset.target);
    input.type = input.type === "password" ? "text" : "password";
    icon.textContent = input.type === "password" ? "üëÅÔ∏è" : "üôà";
  });
});

const form = document.getElementById("registerForm");
const msg = document.getElementById("msg");
const registerBtn = document.getElementById("registerBtn");
const spinner = registerBtn.querySelector(".spinner");
const btnText = registerBtn.querySelector(".btn-text");

// Remove error class on input
document.querySelectorAll('input').forEach(input => {
  input.addEventListener('input', () => {
    input.parentElement.classList.remove('error');
  });
});

form.addEventListener("submit", async (e) => {
  e.preventDefault();

  const name = document.getElementById("name").value.trim();
  const username = document.getElementById("username").value.trim();
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();
  const confirmPassword = document.getElementById("confirmPassword").value.trim();

  // Clear previous errors
  document.querySelectorAll('.input-group').forEach(group => {
    group.classList.remove('error');
  });

  if (!/\S+@\S+\.\S+/.test(email)) {
    document.getElementById("email").parentElement.classList.add('error');
    showMessage("‚ö†Ô∏è Enter a valid email address.", "error");
    return;
  }

  if (password !== confirmPassword) {
    document.getElementById("password").parentElement.classList.add('error');
    document.getElementById("confirmPassword").parentElement.classList.add('error');
    showMessage("‚ö†Ô∏è Passwords do not match.", "error");
    return;
  }

  if (password.length < 6) {
    document.getElementById("password").parentElement.classList.add('error');
    showMessage("‚ö†Ô∏è Password must be at least 6 characters long.", "error");
    return;
  }

  loading(true, "‚ú® Creating your account...");

  try {
    const res = await fetch(`${API_URL}/register`, {
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({ name, username, email, password })
    });

    const data = await res.json();

    if (!res.ok) {
      showMessage("‚ùå " + (data.message || "Registration failed."), "error");
      loading(false);
      return;
    }

    showMessage("‚úÖ Account created! Please verify your email.", "success");
    form.reset();

  } catch (err) {
    showMessage("‚ö†Ô∏è Server error. Please try again.", "error");
  }

  loading(false);
});

function loading(isLoading, text="") {
  if (isLoading) {
    msg.className = "msg info show";
    msg.textContent = text;
    spinner.style.display = "inline-block";
    btnText.style.display = "none";
    registerBtn.disabled = true;
  } else {
    spinner.style.display = "none";
    btnText.style.display = "inline";
    registerBtn.disabled = false;
  }
}

function showMessage(text, type="info") {
  msg.textContent = text;
  msg.className = `msg ${type} show`;
}
</script>

</body>
</html>