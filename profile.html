<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Profile | Dress Organizer</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />

  

  <link rel="stylesheet" href="css/profile.css" /></head>

<body>
  <div class="app">

    <!-- SIDEBAR (desktop only by default) -->
    <aside id="sidebar" class="sidebar closed" aria-hidden="true">

      <div class="logo">
        <div class="brand-icon">ğŸ‘—</div>
        <div>
          <div style="font-weight:700">Dress Organizer</div>
          <div style="font-size:12px;opacity:.8">My Wardrobe</div>
        </div>
      </div>

      <nav class="nav-list">
        <div class="nav-item" onclick="location.href='dashboard.html'"><span class="icon">ğŸ </span><span class="label">Dashboard</span></div>
        <div class="nav-item" onclick="location.href='all-dresses.html'"><span class="icon">ğŸ‘—</span><span class="label">All Dresses</span></div>
        <div class="nav-item" onclick="location.href='upload.html'"><span class="icon">â¬†ï¸</span><span class="label">Upload</span></div>
        <div class="nav-item" onclick="location.href='manage.html'"><span class="icon">ğŸ“‚</span><span class="label">Manage</span></div>
        <div class="nav-item" onclick="location.href='search.html'"><span class="icon">ğŸ”</span><span class="label">Search</span></div>
        <div class="nav-item" onclick="location.href='favourites.html'"><span class="icon">â­</span><span class="label">Favourites</span></div>
        <div class="nav-item active" onclick="location.href='profile.html'"><span class="icon">âš™ï¸</span><span class="label">Profile</span></div>
        <div style="flex:1"></div>
        <div class="nav-item" onclick="logout()"><span class="icon">ğŸšª</span><span class="label">Logout</span></div>
      </nav>

    </aside>

    <!-- MAIN CONTENT -->
    <main id="main" class="main">
      <div class="topbar">
        <div class="top-left">
          <button id="sidebarToggle" class="sidebar-toggle">â˜°</button>
          <div>
            <div class="page-title">Your Profile</div>
            <div class="small muted">Manage your account, backup & preferences</div>
          </div>
        </div>

        <div class="top-actions">

  <!-- NEW Dashboard Button for Desktop -->
          <button class="action-btn" onclick="location.href='dashboard.html'">ğŸ  Dashboard</button>

          <button class="action-btn" onclick="openPasswordModal()">ğŸ” Change Password</button>
          <button class="action-btn action-danger" onclick="openDeleteModal()">ğŸ—‘ Delete Account</button>
        </div>
      </div>
      <!-- Profile card -->
      <section class="card">
        <div class="profile-area">
          <div style="display:flex;flex-direction:column;align-items:center">
            <img id="profilePic" src="default.jpg" class="profile-pic" alt="Profile picture" />
            <label class="upload-btn">
              Upload New Photo
              <input type="file" id="picInput" hidden accept="image/*">
            </label>
          </div>

          <div style="flex:1;min-width:220px">
            <div style="display:flex;align-items:center;justify-content:space-between">
              <div>
                <div id="name" style="font-weight:800;font-size:1.1rem">â€”</div>
                <div id="email" class="muted small">â€”</div>
              </div>
              <div style="text-align:right">
                <div id="verifyBadge" class="small"></div>
                <div style="height:6px"></div>
                <button class="edit-btn" onclick="editName()">Edit Name</button>
              </div>
            </div>

            <div style="margin-top:12px">
              <div style="display:flex;gap:10px;flex-wrap:wrap">
                <button class="action-btn" onclick="location.href='manage.html'">âš™ï¸ Manage</button>
                <button class="action-btn" onclick="location.href='upload.html'">ğŸ“¤ Upload</button>
                <button class="action-btn" onclick="location.href='favourites.html'">â­ Favourites</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Info card -->
      <section class="card">
        <div class="info-row">
          <span>Username</span>
          <div>
            <span id="username">â€”</span>
            <button class="edit-btn" onclick="editUsername()">Edit</button>
          </div>
        </div>

        <div class="info-row">
          <span>Status</span>
          <span id="verifyBadge2" class="muted">â€”</span>
        </div>

        <div class="info-row">
          <span>Joined</span>
          <span id="joined">â€”</span>
        </div>

        <div class="info-row" style="border-bottom:none;">
          <span>Actions</span>
          <div class="info-actions">
            <button class="action-btn" onclick="downloadBackup()">ğŸ“¦ Export Backup</button>
            <button class="action-btn" onclick="document.getElementById('importInput').click()">ğŸ“¥ Import Backup</button>
          </div>
        </div>

        <input type="file" id="importInput" accept=".json" hidden onchange="handleImport(event)">
      </section>

      <!-- Placeholder stats -->
      <section class="card center">
        <div style="font-weight:800; margin-bottom:8px">Quick Stats</div>
        <div class="small muted">Open Dashboard to see live stats</div>
      </section>

      <!-- Password Modal -->
      <div id="passwordModal" class="modal-bg" onclick="if(event.target===this) closePasswordModal()">
        <div class="modal">
          <h3>Change Password</h3>
          <input id="curPass" class="input" type="password" placeholder="Current Password" />
          <input id="newPass" class="input" type="password" placeholder="New Password" />
          <div style="display:flex;gap:10px;margin-top:12px;">
            <button class="action-btn" onclick="changePassword()">Update</button>
            <button class="action-btn action-danger" onclick="closePasswordModal()">Cancel</button>
          </div>
        </div>
      </div>

      <!-- Delete Modal -->
      <div id="deleteModal" class="modal-bg" onclick="if(event.target===this) closeDeleteModal()">
        <div class="modal">
          <h3>Delete Account</h3>
          <p>Type <b>DELETE</b> to confirm.</p>
          <input id="confirmDeleteInput" class="input" placeholder="DELETE" />
          <div style="display:flex;gap:10px;margin-top:12px;">
            <button class="action-btn action-danger" onclick="deleteAccount()">Delete</button>
            <button class="action-btn" onclick="closeDeleteModal()">Cancel</button>
          </div>
        </div>
      </div>

      <!-- Restore Modal -->
      <div id="restoreModal" class="modal-bg" onclick="if(event.target===this) closeRestoreModal()">
        <div class="modal">
          <h3>Restore Preview</h3>

          <label><input type="checkbox" id="restoreSections" checked> Sections</label><br>
          <label><input type="checkbox" id="restoreDresses" checked> Dresses</label>

          <div id="previewList" style="margin-top:12px; max-height:220px; overflow:auto;"></div>

          <div style="display:flex;gap:10px;margin-top:12px;">
            <button class="action-btn" onclick="confirmRestore()">Restore</button>
            <button class="action-btn action-danger" onclick="closeRestoreModal()">Cancel</button>
          </div>
        </div>
      </div>
      <!-- Restore Loading Overlay -->
      <div id="restoreLoading" style="
        display:none;
        position:fixed;
        inset:0;
        background:rgba(0,0,0,0.65);
        backdrop-filter:blur(6px);
        z-index:999999;
        align-items:center;
        justify-content:center;
        flex-direction:column;
        color:white;
        font-family:Inter,sans-serif;
        text-align:center;
      ">
        <div class="loader" style="
          width:48px;
          height:48px;
          border:5px solid rgba(255,255,255,0.25);
          border-top-color:#a78bfa;
          border-radius:50%;
          animation:spin 0.9s linear infinite;
          margin-bottom:14px;
        "></div>

        <div style="font-size:1.2rem; font-weight:700;">Restoring your dataâ€¦</div>
        <div style="font-size:0.9rem; opacity:.8; margin-top:6px;">Please wait</div>
      </div>

      


      <div id="toastBox"></div>
    </main>

  </div>

  <!-- Bottom navigation -->
  <div class="bottom-nav">
    <div class="bottom-btn" onclick="location.href='dashboard.html'">ğŸ </div>
    <div class="bottom-btn" onclick="location.href='upload.html'">ğŸ“¤</div>
    <div class="bottom-btn" onclick="location.href='search.html'">ğŸ”</div>
    <div class="bottom-btn" onclick="location.href='favourites.html'">â­</div>
    <div class="bottom-btn" onclick="toggleSidebar()">â˜°</div>
  </div>


<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>


  <script src="js/profile.js"></script></body>
</html>
